<app-breadcrumb-menu [currentPage]="uploadData.name" [menuItems]="menuItems" />
<div class="">
  <div class="my-5">
    <p class="font-semibold text-brand-black-100 text-lg">Virtual machine: #{{ uploadData.name }}</p>
    <div class="flex justify-between">
      <!--      status ? 'Running' : 'Stopped'-->
      <app-status-pill [status]="uploadData.is_active" [message]="uploadData.is_active ? 'Running' : 'Stopped'" />
      <div class="flex">
        <button

          class="bg-amber-200 mr-2 rounded-lg py-2.5 px-10 text-color text-center flex"
          [routerLink]="['/dashboard/virtualmachines/edit', uploadData._id]"
        >
          <p>Edit</p>
        </button>
        <button

          class="bg-amber-200 mr-2 rounded-lg py-2.5 px-10 text-color text-center flex"
          (click)="changeUser()"
        >
          <p>Assign</p>
        </button>
        <div
          class="rounded w-9 h-9 border border-slate-500 grid place-items-center animate-pulse"
          [matMenuTriggerFor]="menu"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
            <path
              d="M9.25 15.5C9.25 14.8096 9.80964 14.25 10.5 14.25C11.1904 14.25 11.75 14.8096 11.75 15.5C11.75 16.1904 11.1904 16.75 10.5 16.75C9.80964 16.75 9.25 16.1904 9.25 15.5Z"
              fill="#64748b"
              fill-opacity="1"
            />
            <path
              d="M9.25 10.5C9.25 9.80964 9.80964 9.25 10.5 9.25C11.1904 9.25 11.75 9.80964 11.75 10.5C11.75 11.1904 11.1904 11.75 10.5 11.75C9.80964 11.75 9.25 11.1904 9.25 10.5Z"
              fill="#64748b"
              fill-opacity="1"
            />
            <path
              d="M10.5 4.25C9.80964 4.25 9.25 4.80964 9.25 5.5C9.25 6.19036 9.80964 6.75 10.5 6.75C11.1904 6.75 11.75 6.19036 11.75 5.5C11.75 4.80964 11.1904 4.25 10.5 4.25Z"
              fill="#64748b"
              fill-opacity="1"
            />
          </svg>
        </div>
        <mat-menu #menu="matMenu">
          <div>
            <button mat-menu-item (click)="toggleStatus()">{{ uploadData.is_active ? 'Stop' : 'Run' }}</button>
            <button mat-menu-item (click)="createBackup()">Backup</button>
            <button mat-menu-item (click)="delete()">Delete</button>
          </div>
        </mat-menu>
      </div>
    </div>
  </div>

  <div class="h-3/5 overflow-y-scroll">
    <div class="rounded-lg border border-gray-300 w-full h-3/5 p-2 bg-white">
      <div class="grid grid-cols-4 gap-4">
        <div class="flex flex-col">
          <p class="font-normal text-xs leading-4.5 text-brand-black">Name</p>
          <p class="font-normal text-brand-black-80 text-sm">
            {{ uploadData.description }}
          </p>
        </div>
        <div class="flex flex-col">
          <p class="font-normal text-xs leading-4.5 text-brand-black">Date created</p>
          <p class="font-normal text-brand-black-80 text-sm">
            {{ uploadData.created | date }}
          </p>
        </div>
        <div class="flex flex-col">
          <p class="font-normal text-xs leading-4.5 text-brand-black">Region</p>
          <p class="font-normal text-brand-black-80 text-sm">
            {{ uploadData.region_name }}
          </p>
        </div>
        <div class="flex flex-col">
          <p class="font-normal text-xs leading-4.5 text-brand-black">Operating system</p>
          <p class="font-normal text-brand-black-80 text-sm">
            {{ uploadData.operating_system }}
          </p>
        </div>
      </div>
      <div class="grid grid-cols-4 gap-4 mt-7">
        <div class="flex flex-col">
          <p class="font-normal text-xs leading-4.5 text-brand-black">Disk size(GB)</p>
          <p class="font-normal text-brand-black-80 text-sm">{{ uploadData.disk_size }} GB</p>
        </div>
        <div class="flex flex-col">
          <p class="font-normal text-xs leading-4.5 text-brand-black">Backups</p>
          <p class="font-normal text-brand-black-80 text-sm" *ngIf='uploadData.backups'>{{ uploadData.backups.length }} </p>
        </div>
        <div class="flex flex-col">
          <p class="font-normal text-xs leading-4.5 text-brand-black">Last backup</p>
          <p class="font-normal text-brand-black-80 text-sm">
            <span *ngIf="uploadData.last_backup">{{ uploadData.last_backup | date : 'medium' }}</span>
            <span *ngIf="!uploadData.last_backup">None</span>
          </p>
        </div>
        <div class="flex flex-col" *ngIf=" uploadData.user_info">
          <p class="font-normal text-xs leading-4.5 text-brand-black">Owner</p>
          <p class="font-normal text-brand-black-80 text-sm capitalize">
            {{ uploadData.user_info.name || uploadData.user_info.email }}
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-10">
    <app-navbar [navItems]="navItems"></app-navbar>
    <app-vm-activities *ngIf="uploadData?.history" [activities]="uploadData.history" />
  </div>
</div>
